# ä»»åŠ¡ 02ï¼šåŸºç¡€æ¨¡å‹ - ç‰©å“ç³»ç»Ÿ

## ğŸ“‹ ä»»åŠ¡ç›®æ ‡
å»ºç«‹ç‰©å“ç³»ç»Ÿçš„æ•°æ®æ¨¡å‹ï¼ŒåŒ…æ‹¬ç‰©å“å®šä¹‰ã€æ ‡ç­¾ä½“ç³»ã€ä»“åº“ç³»ç»Ÿã€‚

## ğŸ“ éœ€è¦åˆ›å»º/ä¿®æ”¹çš„æ–‡ä»¶

### åç«¯æ–‡ä»¶
```
backend/internal/model/
â”œâ”€â”€ item.go          # ç‰©å“å®šä¹‰æ¨¡å‹
â”œâ”€â”€ item_tag.go      # ç‰©å“æ ‡ç­¾æ¨¡å‹
â””â”€â”€ inventory.go     # ä»“åº“æ¨¡å‹

backend/internal/data/
â””â”€â”€ items_init.go    # ç‰©å“åˆå§‹åŒ–æ•°æ®
```

### API è·¯ç”±
```
backend/internal/handler/
â””â”€â”€ inventory.go     # ä»“åº“æ¥å£
```

## ğŸ“ è¯¦ç»†å®ç°è¦æ±‚

### 1. ç‰©å“æ ‡ç­¾æ¨¡å‹ (ItemTag)
```go
type ItemTag struct {
    ID   uint   `gorm:"primaryKey"`
    Code string `gorm:"size:50;uniqueIndex"` // æ ‡ç­¾ä»£ç ï¼šmaterial, crystal, loot, fish, consumable, equipment ç­‰
    Name string `gorm:"size:50"`             // æ ‡ç­¾åç§°
}
```

### 2. ç‰©å“å®šä¹‰æ¨¡å‹ (Item)
```go
type Item struct {
    ID              uint    `gorm:"primaryKey"`
    Code            string  `gorm:"size:50;uniqueIndex"` // ç‰©å“ä»£ç ï¼Œå¦‚ "oak_log", "iron_ore"
    Name            string  `gorm:"size:100"`            // ç‰©å“åç§°
    Description     string  `gorm:"size:500"`            // ç‰©å“æè¿°
    Icon            string  `gorm:"size:200"`            // å›¾æ ‡è·¯å¾„
    Tier            int     `gorm:"default:1"`           // ç‰©å“ç­‰çº§
    
    // å †å å±æ€§
    Stackable       bool    `gorm:"default:true"`        // æ˜¯å¦å¯å †å 
    MaxStack        int     `gorm:"default:999"`         // æœ€å¤§å †å æ•°
    
    // å¼ºåŒ–ç›¸å…³ï¼ˆè£…å¤‡ç±»ç‰©å“ï¼‰
    EnhanceMaterial string  `gorm:"size:50"`             // å¼ºåŒ–æ‰€éœ€ææ–™ä»£ç 
    EnhanceMaxLevel int     `gorm:"default:0"`           // å¼ºåŒ–ä¸Šé™
    
    // æ ‡ç­¾å…³è”ï¼ˆå¤šå¯¹å¤šï¼‰
    Tags            []ItemTag `gorm:"many2many:item_item_tags"`
}
```

### 3. ç‰©å“å¼ºåŒ–é…ç½® (ItemEnhanceConfig)
```go
type ItemEnhanceConfig struct {
    ID           uint    `gorm:"primaryKey"`
    ItemID       uint    `gorm:"index"`        // ç‰©å“ID
    Level        int     `gorm:""`             // å¼ºåŒ–ç­‰çº§
    FailureRate  float64 `gorm:""`             // å¤±è´¥ç‡ 0.0-1.0
    MaterialCost int     `gorm:""`             // ææ–™æ¶ˆè€—æ•°é‡
}
```

### 4. ä»“åº“ç‰©å“æ¨¡å‹ (InventoryItem)
```go
type InventoryItem struct {
    ID           uint   `gorm:"primaryKey"`
    CharacterID  uint   `gorm:"index"`          // æ‰€å±è§’è‰²
    ItemID       uint   `gorm:"index"`          // ç‰©å“ID
    Quantity     int    `gorm:"default:1"`      // æ•°é‡
    EnhanceLevel int    `gorm:"default:0"`      // å¼ºåŒ–ç­‰çº§ï¼ˆè£…å¤‡ç±»ï¼‰
    
    Item         Item   `gorm:"foreignKey:ItemID"`
}
```

### 5. åˆå§‹ç‰©å“æ•°æ®
åˆ›å»ºåŸºç¡€ç‰©å“æ•°æ®ï¼Œè‡³å°‘åŒ…å«ï¼š
- **ææ–™ç±»**ï¼šæ©¡æœ¨åŸæœ¨ã€é“çŸ¿çŸ³ã€é±¼ã€æµ†æœã€ç¾Šæ¯›
- **æ™¶ä½“ç±»**ï¼šä½çº§å¼ºåŒ–æ™¶ä½“
- **è£…å¤‡ç±»**ï¼šæœ¨å‰‘ã€å¸ƒè¡£ï¼ˆç”¨äºåç»­æµ‹è¯•ï¼‰

### 6. æ ‡ç­¾åˆ—è¡¨
```go
var DefaultTags = []ItemTag{
    {Code: "material", Name: "ææ–™"},
    {Code: "crystal", Name: "æ™¶ä½“"},
    {Code: "loot", Name: "æˆ˜åˆ©å“"},
    {Code: "fish", Name: "é±¼ç±»"},
    {Code: "consumable", Name: "æ¶ˆè€—å“"},
    {Code: "equipment", Name: "è£…å¤‡"},
    {Code: "weapon", Name: "æ­¦å™¨"},
    {Code: "armor", Name: "é˜²å…·"},
    {Code: "tier1", Name: "ä¸€çº§"},
    {Code: "tier2", Name: "äºŒçº§"},
    {Code: "tier3", Name: "ä¸‰çº§"},
}
```

### 7. API æ¥å£
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /api/items | è·å–æ‰€æœ‰ç‰©å“å®šä¹‰ |
| GET | /api/items/:code | è·å–å•ä¸ªç‰©å“è¯¦æƒ… |
| GET | /api/characters/:id/inventory | è·å–è§’è‰²ä»“åº“ |
| POST | /api/characters/:id/inventory/add | æ·»åŠ ç‰©å“åˆ°ä»“åº“ï¼ˆæµ‹è¯•ç”¨ï¼‰ |

## âœ… éªŒè¯æ£€æŸ¥ç‚¹

å®Œæˆåè¯·éªŒè¯ï¼š
1. [ ] æœåŠ¡å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–ç‰©å“æ ‡ç­¾
2. [ ] æœåŠ¡å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–åŸºç¡€ç‰©å“
3. [ ] ç‰©å“ä¸æ ‡ç­¾çš„å¤šå¯¹å¤šå…³ç³»æ­£ç¡®
4. [ ] èƒ½è·å–ç‰©å“åˆ—è¡¨ï¼ŒåŒ…å«å…¶æ ‡ç­¾ä¿¡æ¯
5. [ ] è§’è‰²ä»“åº“ä¸è§’è‰²æ­£ç¡®å…³è”
6. [ ] èƒ½å‘è§’è‰²ä»“åº“æ·»åŠ ç‰©å“
7. [ ] å¯å †å ç‰©å“æ­£ç¡®ç´¯åŠ æ•°é‡

## ğŸ”— ä¾èµ–å…³ç³»
- ä¾èµ–ï¼šä»»åŠ¡ 01ï¼ˆéœ€è¦ Character æ¨¡å‹ï¼‰
