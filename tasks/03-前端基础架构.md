# ä»»åŠ¡ 03ï¼šå‰ç«¯åŸºç¡€æ¶æ„

## ğŸ“‹ ä»»åŠ¡ç›®æ ‡
æ­å»ºå‰ç«¯åŸºç¡€æ¶æ„ï¼ŒåŒ…æ‹¬ Pinia çŠ¶æ€ç®¡ç†ã€Element Plus é›†æˆã€åŸºç¡€å¸ƒå±€ç»„ä»¶ã€‚

## ğŸ“ éœ€è¦åˆ›å»º/ä¿®æ”¹çš„æ–‡ä»¶

### å‰ç«¯æ–‡ä»¶
```
frontend/
â”œâ”€â”€ package.json              # æ·»åŠ ä¾èµ–
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js              # é…ç½® Pinia å’Œ Element Plus
â”‚   â”œâ”€â”€ App.vue              # ä¸»åº”ç”¨å¸ƒå±€
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ index.js         # Pinia é…ç½®
â”‚   â”‚   â”œâ”€â”€ user.js          # ç”¨æˆ·çŠ¶æ€
â”‚   â”‚   â””â”€â”€ character.js     # è§’è‰²çŠ¶æ€
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ GameLayout.vue   # æ¸¸æˆä¸»å¸ƒå±€ï¼ˆå·¦ä¾§èœå•+ä¸»å†…å®¹ï¼‰
â”‚   â”‚   â””â”€â”€ SideMenu.vue     # ä¾§è¾¹æ èœå•
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ Login.vue        # ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ Register.vue     # æ³¨å†Œé¡µ
â”‚   â”‚   â”œâ”€â”€ CharacterSelect.vue  # è§’è‰²é€‰æ‹©é¡µ
â”‚   â”‚   â””â”€â”€ Dashboard.vue    # ä¸»ç•Œé¢ï¼ˆä»»åŠ¡é˜Ÿåˆ—å±•ç¤ºï¼‰
â”‚   â””â”€â”€ router/
â”‚       â””â”€â”€ index.js         # è·¯ç”±é…ç½®
```

## ğŸ“ è¯¦ç»†å®ç°è¦æ±‚

### 1. å®‰è£…ä¾èµ–
```bash
npm install pinia element-plus @element-plus/icons-vue
```

### 2. Pinia Store - ç”¨æˆ·çŠ¶æ€ (stores/user.js)
```javascript
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'
import api from '@/utils/api'

export const useUserStore = defineStore('user', () => {
  const token = ref(localStorage.getItem('token') || '')
  const user = ref(null)
  
  const isLoggedIn = computed(() => !!token.value)
  
  async function login(username, password) {
    const res = await api.post('/auth/login', { username, password })
    token.value = res.data.token
    user.value = res.data.user
    localStorage.setItem('token', res.data.token)
    return res.data
  }
  
  async function register(username, password) {
    const res = await api.post('/auth/register', { username, password })
    return res.data
  }
  
  function logout() {
    token.value = ''
    user.value = null
    localStorage.removeItem('token')
  }
  
  return { token, user, isLoggedIn, login, register, logout }
})
```

### 3. Pinia Store - è§’è‰²çŠ¶æ€ (stores/character.js)
```javascript
import { defineStore } from 'pinia'
import { ref } from 'vue'
import api from '@/utils/api'

export const useCharacterStore = defineStore('character', () => {
  const characters = ref([])         // ç”¨æˆ·æ‰€æœ‰è§’è‰²
  const currentCharacter = ref(null) // å½“å‰é€‰ä¸­è§’è‰²
  
  async function fetchCharacters() {
    const res = await api.get('/characters')
    characters.value = res.data
    return res.data
  }
  
  async function createCharacter(name, slotIndex) {
    const res = await api.post('/characters', { name, slot_index: slotIndex })
    await fetchCharacters()
    return res.data
  }
  
  function selectCharacter(character) {
    currentCharacter.value = character
    localStorage.setItem('currentCharacterId', character.id)
  }
  
  return { characters, currentCharacter, fetchCharacters, createCharacter, selectCharacter }
})
```

### 4. æ¸¸æˆä¸»å¸ƒå±€ (GameLayout.vue)
- å·¦ä¾§å›ºå®šèœå•æ ï¼ˆ200pxå®½ï¼‰
- å³ä¾§ä¸»å†…å®¹åŒºåŸŸ
- ä½¿ç”¨ Element Plus çš„ `el-menu` ç»„ä»¶
- èœå•é¡¹ï¼ˆåç»­é€æ­¥å¯ç”¨ï¼‰ï¼š
  - ğŸ  ä¸»é¡µï¼ˆä»»åŠ¡é˜Ÿåˆ—ï¼‰
  - â›ï¸ ç”Ÿæ´»æŠ€èƒ½
    - ä¼æœ¨
    - é‡‡çŸ¿
    - é’“é±¼
    - é‡‡é›†
    - å…»æ®–
    - çƒ¹é¥ª
    - é”»é€ 
    - ç¼åˆ¶
  - âš”ï¸ æˆ˜æ–—
  - ğŸ’ å¼ºåŒ–
  - ğŸ“¦ ä»“åº“
  - ğŸ‘¤ è§’è‰²

### 5. è·¯ç”±é…ç½®
```javascript
const routes = [
  { path: '/login', name: 'Login', component: Login },
  { path: '/register', name: 'Register', component: Register },
  { path: '/characters', name: 'CharacterSelect', component: CharacterSelect, meta: { requiresAuth: true } },
  {
    path: '/game',
    component: GameLayout,
    meta: { requiresAuth: true, requiresCharacter: true },
    children: [
      { path: '', name: 'Dashboard', component: Dashboard },
      // åç»­æ·»åŠ å…¶ä»–è·¯ç”±
    ]
  },
  { path: '/', redirect: '/login' }
]
```

### 6. è·¯ç”±å®ˆå«
- æœªç™»å½•è®¿é—®éœ€è¦ç™»å½•çš„é¡µé¢ â†’ è·³è½¬åˆ° /login
- å·²ç™»å½•ä½†æœªé€‰æ‹©è§’è‰² â†’ è·³è½¬åˆ° /characters
- å·²é€‰æ‹©è§’è‰² â†’ æ­£å¸¸è®¿é—®æ¸¸æˆé¡µé¢

## âœ… éªŒè¯æ£€æŸ¥ç‚¹

å®Œæˆåè¯·éªŒè¯ï¼š
1. [ ] Element Plus ç»„ä»¶æ­£å¸¸æ¸²æŸ“
2. [ ] ç™»å½•é¡µé¢èƒ½æ­£å¸¸æäº¤è¡¨å•
3. [ ] ç™»å½•æˆåŠŸåè·³è½¬åˆ°è§’è‰²é€‰æ‹©é¡µ
4. [ ] è§’è‰²é€‰æ‹©é¡µæ˜¾ç¤ºæ‰€æœ‰è§’è‰²ï¼ˆæˆ–åˆ›å»ºæ–°è§’è‰²ï¼‰
5. [ ] é€‰æ‹©è§’è‰²åè¿›å…¥æ¸¸æˆä¸»ç•Œé¢
6. [ ] å·¦ä¾§èœå•æ­£ç¡®æ˜¾ç¤º
7. [ ] Token ä¿å­˜åœ¨ localStorage
8. [ ] åˆ·æ–°é¡µé¢åä¿æŒç™»å½•çŠ¶æ€

## ğŸ”— ä¾èµ–å…³ç³»
- ä¾èµ–ï¼šä»»åŠ¡ 01ï¼ˆéœ€è¦åç«¯ APIï¼‰
